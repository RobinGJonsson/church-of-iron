{% extends 'base.html' %}
{% load static %}
{% block page_title %}Sign Up{% endblock page_title %}


{% block page_header %}
    <div class="top-banner" style="background-image: url('/media/hero-image.jpg'); background-size: cover; background-position: center;"></div>
    <div class="band"></div>
{% endblock page_header %}


{% block content %}
<section class="text-center">
    <h1 class="section header">{{ membership.name|upper }} MEMBERSHIP</h1>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-6 col-md-8 col-11 mx-auto">

                {% if user.is_authenticated and user_profile.membership.name == membership.name %}
                You already have a {{ member.membership.name }} membership
                <br>
                You can change your membership <a href="{% url 'all_memberships' %}">here</a>
                {% elif user.is_authenticated and  membership.level < user_profile.membership.level%}
                You have a {{ user_profile.membership.name }} membership
                <br>
                You can only apply for a higher level membership 
                <br>
                You can choose a higher level membership <a href="{% url 'all_memberships' %}">here</a>
                {% else %}
                <form method="POST" action="">
                    {% csrf_token %}
                    <div class="input-box">
                        <fieldset>
                            <legend>Member Information</legend>
                            {{ form.full_name | as_crispy_field }}
                            {{ form.email | as_crispy_field }}
                            {{ form.phone | as_crispy_field }}

                            {% if not user.is_authenticated %}
                                <p>Already have an account?</p>
                                <p>Sign In <a href="{% url 'account_login' %}">here</a> before signing up for a membership</p>
                                <input class="input-item" type="password" placeholder="Password..." name='password1' required>
                                <input class="input-item" type="password" placeholder="Password (again)..." name='password2' required>
                            {% endif %}
                        </fieldset>
                    </div>
                    <hr>
                    <div class="row justify-content-evenly mx-0">
                        <div class="col-6">
                            <p><b>Price Monthly: ${{ membership.monthly_price }}</b></p>
                        </div>
                        <div class="col-6">
                            <p><b>Price Yearly: ${{ membership.yearly_price }}</b></p>
                        </div>
                        <div class="col-5">
                            <label for="monthly">Monthly</label>
                            <input type="radio" name="payment_plan" id="monthly" value="monthly" checked>
                        </div>
                        <div class="col-5">
                            <label for="yearly">Yearly</label>
                            <input type="radio" name="payment_plan" id="yearly" value="yearly">
                        </div>
                        <input type="hidden" name="membership" value="{{membership.name}}">
                        <input class="mt-4 btn btn-success btn-lg" type="submit" value="Checkout">
                    </div>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock content %}